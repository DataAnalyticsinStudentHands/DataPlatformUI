import{_ as C,u as m,i as g,a as v,L as D,o as u,c as _,b as l,w as i,g as t,al as w,l as c,h as f,t as p,I as y,B as x,v as I,M as E,F as T,x as V,q as R,z as L,af as b}from"./index.19bf4f6c.js";import{D as A}from"./datetime.a1e71b77.js";const O={components:{},data(){return{semesterData:[],showInactive:!1,selectedSemesters:[],searchTerm:"",hoverId:null}},watch:{$route:"onRouteChange"},mounted(){m().startLoading(),this.fetchSemesterData().then(()=>{m().stopLoading()}).catch(s=>{this.handleError(s),m().stopLoading()}),window.scrollTo(0,0),this.$route.params.toastType&&g[this.$route.params.toastType](this.$route.params.toastMessage,{position:this.$route.params.toastPosition,toastClassName:this.$route.params.toastCSS})},methods:{formatDate(s){return A.fromISO(s).plus({days:1}).toFormat("MM-dd-yyyy")},editSemester(s){this.$router.push({name:"instructorSpecificSemester",params:{id:s}})},async fetchSemesterData(){m().startLoading();try{let r=m().token,a={BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API+"/instructorSideData/semesters/";const d=await v.get(a,{headers:{token:r}});this.semesterData=d.data}catch(s){throw this.handleError(s),s}},toggleShowInactive(){this.showInactive=!this.showInactive},deactivateSemesters(){let r=m().token;const a={semesterStatus:!1},d=this.selectedSemesters.map(e=>{let o={BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API+`/instructorSideData/semesters/${e}`;return v.put(o,a,{headers:{token:r}})});Promise.all(d).then(()=>{const e=(this.selectedSemesters.length===1?"Semester":"Semesters")+" deactivated!";this.selectedSemesters=[],this.fetchSemesterData(),g.error(e,{position:"top-right",toastClassName:"Toastify__toast--delete"})}).catch(e=>{this.handleError(e)})},activateSemesters(){let r=m().token;const a={semesterStatus:!0},d=this.selectedSemesters.map(e=>{let o={BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API+`/instructorSideData/semesters/${e}`;return v.put(o,a,{headers:{token:r}})});Promise.all(d).then(()=>{const e=(this.selectedSemesters.length===1?"Semester":"Semesters")+" activated!";this.selectedSemesters=[],this.fetchSemesterData(),g.success(e,{position:"top-right",toastClassName:"Toastify__toast--create"})}).catch(e=>{this.handleError(e)})}},computed:{filteredSemesterData(){const s=this.searchTerm.toLowerCase(),r=this.semesterData.filter(a=>{const d=a.semesterName.toLowerCase(),e=this.formatDate(a.semesterStartDate)+" to "+this.formatDate(a.semesterEndDate);return d.includes(s)||e.includes(s)});return this.showInactive?r.filter(a=>!a.semesterStatus):r.filter(a=>a.semesterStatus)},loading(){return m().loading}}},M={class:""},N={style:{"text-align":"center","margin-top":"2rem","margin-bottom":"2rem"}},P=t("p",{class:"font-weight-black text-h6"},"Semesters",-1),B=t("br",null,null,-1),U=t("br",null,null,-1),F=t("br",null,null,-1),j=t("br",null,null,-1),z=t("br",null,null,-1),q={key:0,justify:"center",align:"center"},G={key:1,style:{display:"flex","justify-content":"center"}},H={style:{"max-height":"400px","overflow-y":"auto"}},J=t("thead",null,[t("tr",null,[t("th",{class:"text-left column-margin"}),t("th",{class:"text-left column-margin"},"Semester"),t("th",{class:"text-left column-margin"},"Date Ranges"),t("th",{class:"text-left column-margin"},"Status"),t("th"),t("th")])],-1),K=["onMouseenter"],Q={class:"text-left"},W=["value"],X=["onClick"],Y=["onClick"],Z=["onClick"],$=t("td",null,null,-1),ee=t("td",null,null,-1);function te(s,r,a,d,e,o){const S=D("router-link"),k=D("center");return u(),_("main",M,[l(k,null,{default:i(()=>[t("h2",N,[l(S,{class:"",to:"/instructorSemesters"},{default:i(()=>[c("Semesters")]),_:1}),c(" | "),l(S,{class:"",to:"/instructorExperiences"},{default:i(()=>[c("Experiences")]),_:1}),c(" | "),l(S,{class:"",to:"/instructorActivities"},{default:i(()=>[c("Activities")]),_:1})]),P,B,l(f,{style:{"text-align":"center","margin-right":"2rem"}},{default:i(()=>[l(S,{class:"",to:"/instructorAddSemester"},{default:i(()=>[c("Add New Semester")]),_:1})]),_:1}),l(f,{style:{"text-align":"center"},onClick:o.toggleShowInactive},{default:i(()=>[c(p(e.showInactive?"Show Active Semesters":"Show Inactive Semesters"),1)]),_:1},8,["onClick"]),U,F,e.selectedSemesters.length>0?(u(),y(f,{key:0,style:{"text-align":"center","margin-right":"2rem"},onClick:o.deactivateSemesters},{default:i(()=>[c(" Deactivate ")]),_:1},8,["onClick"])):x("",!0),e.selectedSemesters.length>0?(u(),y(f,{key:1,style:{"text-align":"center"},onClick:o.activateSemesters},{default:i(()=>[c(" Activate ")]),_:1},8,["onClick"])):x("",!0),j,z,l(I,{modelValue:e.searchTerm,"onUpdate:modelValue":r[0]||(r[0]=n=>e.searchTerm=n),placeholder:"Search by semester name or date ranges"},null,8,["modelValue"])]),_:1}),o.loading?(u(),_("div",q,[l(E,{indeterminate:""})])):(u(),_("div",G,[t("div",H,[l(w,{style:{width:"100%"}},{default:i(()=>[J,t("tbody",null,[(u(!0),_(T,null,V(o.filteredSemesterData,n=>(u(),_("tr",{key:n._id,style:{cursor:"pointer"},class:R({hoverRow:e.hoverId===n._id}),onMouseenter:h=>e.hoverId=n._id,onMouseleave:r[2]||(r[2]=h=>e.hoverId=null)},[t("td",Q,[L(t("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=h=>e.selectedSemesters=h),value:n._id,style:{outline:"2px solid #808080","margin-right":"10px"}},null,8,W),[[b,e.selectedSemesters]])]),t("td",{class:"text-left",onClick:h=>o.editSemester(n._id)},p(n.semesterName),9,X),t("td",{class:"text-left",onClick:h=>o.editSemester(n._id)},p(o.formatDate(n.semesterStartDate)+" to "+o.formatDate(n.semesterEndDate)),9,Y),t("td",{class:"text-left",onClick:h=>o.editSemester(n._id)},p(n.semesterStatus?"Active":"Inactive"),9,Z),$,ee],42,K))),128))])]),_:1})])]))])}const ae=C(O,[["render",te]]);export{ae as default};
