import{_ as g,u,a as i,o as c,c as p,b as r,w as o,V as N,g as s,t as h,r as D,s as f,v as S,al as k,F as y,x as O,z as T,af as b,h as _,l as x}from"./index.19bf4f6c.js";import{D as E}from"./datetime.a1e71b77.js";const U={props:["id"],data(){return{semester:{originalSemesterName:"",semesterName:"",semesterStartDate:"",semesterEndDate:"",semesterStatus:!1,experiences:[]},selectedExperiences:[]}},beforeMount(){window.scrollTo(0,0),this.fetchExperienceData(),this.fetchSemesterData()},methods:{fetchSemesterData(){let t=u().token,n=`${{BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API}/instructorSideData/semesters`;i.get(`${n}/${this.$route.params.id}`,{headers:{token:t}}).then(a=>{let e=a.data;this.semester.originalSemesterName=e.semesterName,this.semester.semesterName=e.semesterName,this.semester.semesterStartDate=E.fromISO(e.semesterStartDate).plus({days:1}).toISODate(),this.semester.semesterEndDate=E.fromISO(e.semesterEndDate).plus({days:1}).toISODate(),this.semester.semesterStatus=e.semesterStatus,this.selectedExperiences=e.experiences}).catch(a=>{this.handleError(a)})},fetchExperienceData(){let t=u().token,n=`${{BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API}/instructorSideData/experiences/`;i.get(n,{headers:{token:t}}).then(a=>{this.semester.experiences=a.data.filter(e=>e.experienceStatus===!0)}).catch(a=>{this.handleError(a)})},handleUpdateForm(){let t=u().token;const n={semesterName:this.semester.semesterName,semesterStartDate:this.semester.semesterStartDate,semesterEndDate:this.semester.semesterEndDate,experiences:this.selectedExperiences};let a=`${{BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API}/instructorSideData/semesters`;i.get(`${a}/${this.$route.params.id}`,{headers:{token:t}}).then(e=>{let d=e.data;this.semester.semesterStatus=d.semesterStatus,i.put(`${a}/${this.$route.params.id}`,n,{headers:{token:t}}).then(()=>{this.$router.push({name:"instructorSemesters",params:{toastType:"info",toastMessage:"Semester updated!",toastPosition:"top-right",toastCSS:"Toastify__toast--update"}})})})}}},C={class:""},I={class:"font-weight-black text-h6"},R=s("br",null,null,-1),w=s("thead",null,[s("tr",null,[s("th",{class:"text-left"}),s("th",{class:"text-left"},"Experience Code"),s("th",{class:"text-left"},"Experience Name")])],-1),$={class:"text-left"},v=["value"],B={class:"text-left"},P={class:"text-left"},A={style:{"text-align":"right"}};function L(m,t,n,a,e,d){return c(),p("main",C,[r(N,null,{default:o(()=>[s("p",I,"Semester: "+h(e.semester.originalSemesterName),1),R,r(D,null,{default:o(()=>[r(f,{cols:"12",md:"6"},{default:o(()=>[r(S,{modelValue:e.semester.semesterName,"onUpdate:modelValue":t[0]||(t[0]=l=>e.semester.semesterName=l),label:"Semester Name"},null,8,["modelValue"])]),_:1})]),_:1}),r(D,null,{default:o(()=>[r(f,{cols:"12",md:"6"},{default:o(()=>[r(S,{type:"date",modelValue:e.semester.semesterStartDate,"onUpdate:modelValue":t[1]||(t[1]=l=>e.semester.semesterStartDate=l),label:"Semester Start Date"},null,8,["modelValue"])]),_:1}),r(f,{cols:"12",md:"6"},{default:o(()=>[r(S,{type:"date",modelValue:e.semester.semesterEndDate,"onUpdate:modelValue":t[2]||(t[2]=l=>e.semester.semesterEndDate=l),label:"Semester End Date"},null,8,["modelValue"])]),_:1})]),_:1}),r(k,{style:{width:"80%"}},{default:o(()=>[w,s("tbody",null,[(c(!0),p(y,null,O(e.semester.experiences,l=>(c(),p("tr",{key:l._id},[s("td",$,[T(s("input",{type:"checkbox",value:l._id,"onUpdate:modelValue":t[3]||(t[3]=V=>e.selectedExperiences=V),style:{outline:"2px solid #808080","margin-right":"10px"}},null,8,v),[[b,e.selectedExperiences]])]),s("td",B,h(l.experienceCategory),1),s("td",P,h(l.experienceName),1)]))),128))])]),_:1}),s("div",A,[r(_,{onClick:t[4]||(t[4]=l=>m.$router.back()),style:{"margin-right":"10px"}},{default:o(()=>[x(" Cancel ")]),_:1}),r(_,{style:{"text-align":"center"},onClick:d.handleUpdateForm},{default:o(()=>[x(" Update ")]),_:1},8,["onClick"])])]),_:1})])}const z=g(U,[["render",L]]);export{z as default};
