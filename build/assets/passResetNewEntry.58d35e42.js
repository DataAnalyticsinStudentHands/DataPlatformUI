import{_ as P,i as n,u as f,a as _,o as y,I as $,w as t,k as S,b as e,s as i,g as h,t as o,r as d,l as u,S as V,e as b,d as T,v as c,h as g}from"./index.19bf4f6c.js";const k={data(){return{awaitingEmailInput:!0,awaitingConfirmationCode:!1,userID:null,loading:!1,newPassword:null,reEnterPassword:null,newPassRules:[s=>s?s.length<8?this.$t("Password must be at least 8 characters long"):!0:this.$t("Password is required"),s=>s!==this.reEnterPassword?this.$t("Passwords must match"):!0],reEnterPassRules:[s=>s?s.length<8?this.$t("Password must be at least 8 characters long"):!0:this.$t("Re-entered password is required"),s=>s!==this.newPassword?this.$t("Passwords must match"):!0]}},mounted(){this.$route.params.toastMessage&&n[this.$route.params.toastType](this.$route.params.toastMessage,{position:this.$route.params.toastPosition||"top-right",toastClassName:this.$route.params.toastCSS||"Toastify__toast"})},beforeDestroy(){f().removeTokenHeader()},watch:{newPassword(s,r){s!==r&&this.$refs.passForm.validate("reEnterPassword")},reEnterPassword(s,r){s!==r&&this.$refs.passForm.validate("newPassword")}},methods:{async passFormSubmit(){await this.$refs.passForm.validate();const s=this.$refs.passForm.errors.length>0,r=f();if(!s){this.loading=!0;let p={password:this.newPassword},m={BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API+"/userData/resetPassNew";try{(await _.put(m,p,{headers:{token:r.token}})).status===200?this.$router.push({name:"login",params:{toastType:"success",toastMessage:this.$t("Password Reset! You may now login."),toastPosition:"top-right",toastCSS:"Toastify__toast--create"}}):n.error(this.$t("An error occurred. Please try again."),{position:"top-right",toastClassName:"Toastify__toast--delete"})}catch{n.error(this.$t("An error occurred. Please try again."),{position:"top-right",toastClassName:"Toastify__toast--delete"})}finally{this.loading=!1}}},goBackToLogin(){this.$router.push({name:"login"})}}},E={class:"font-bold text-2xl text-red-800 tracking-widest"},R={class:"d-flex justify-center align-center"};function C(s,r,p,m,a,w){return y(),$(S,null,{default:t(()=>[e(d,null,{default:t(()=>[e(i,{cols:"12",class:"pb-0"},{default:t(()=>[h("h2",E,o(s.$t("Update Password")),1)]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[u(o(s.$t("Please enter your new password:")),1)]),_:1})]),_:1}),e(d,{justify:"center"},{default:t(()=>[e(i,{cols:"12",md:"10"},{default:t(()=>[e(V,null,{default:t(()=>[e(b,{ref:"passForm",onSubmit:T(w.passFormSubmit,["prevent"])},{default:t(()=>[e(c,{modelValue:a.newPassword,"onUpdate:modelValue":r[0]||(r[0]=l=>a.newPassword=l),type:"password",rules:a.newPassRules,label:s.$t("New Password:"),class:"mx-auto",style:{width:"100%"},"prepend-icon":"mdi-lock"},null,8,["modelValue","rules","label"]),e(c,{modelValue:a.reEnterPassword,"onUpdate:modelValue":r[1]||(r[1]=l=>a.reEnterPassword=l),type:"password",rules:a.reEnterPassRules,label:s.$t("Re-enter Password:"),class:"mx-auto",style:{width:"100%"},"prepend-icon":"mdi-lock"},null,8,["modelValue","rules","label"]),h("div",R,[e(g,{onClick:w.goBackToLogin,class:"mt-3 mr-2"},{default:t(()=>[u(o(s.$t("Back to Login")),1)]),_:1},8,["onClick"]),e(g,{loading:a.loading,type:"submit",class:"mt-3 bg-red-700 text-white rounded"},{default:t(()=>[u(o(s.$t("Submit")),1)]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}const I=P(k,[["render",C]]);export{I as default};
