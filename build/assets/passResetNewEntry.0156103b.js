import{_ as P,i as n,u as c,a as y,o as _,I as $,w as t,k as b,b as e,s as i,g as h,t as o,r as d,l as u,S,e as V,d as k,v as f,h as g}from"./index.ff4761a7.js";const T={data(){return{awaitingEmailInput:!0,awaitingConfirmationCode:!1,userID:null,loading:!1,newPassword:null,reEnterPassword:null,newPassRules:[s=>s?s.length<8?this.$t("Password must be at least 8 characters long"):!0:this.$t("Password is required"),s=>s!==this.reEnterPassword?this.$t("Passwords must match"):!0],reEnterPassRules:[s=>s?s.length<8?this.$t("Password must be at least 8 characters long"):!0:this.$t("Re-entered password is required"),s=>s!==this.newPassword?this.$t("Passwords must match"):!0]}},mounted(){this.$route.params.toastMessage&&n[this.$route.params.toastType](this.$route.params.toastMessage,{position:this.$route.params.toastPosition||"top-right",toastClassName:this.$route.params.toastCSS||"Toastify__toast"})},beforeDestroy(){c().removeTokenHeader()},watch:{newPassword(s,a){s!==a&&this.$refs.passForm.validate("reEnterPassword")},reEnterPassword(s,a){s!==a&&this.$refs.passForm.validate("newPassword")}},methods:{async passFormSubmit(){await this.$refs.passForm.validate();const s=this.$refs.passForm.errors.length>0,a=c();if(!s){this.loading=!0;let m={password:this.newPassword},p="http://1529618mytest.us.reclaim.cloud/backend/userData/resetPassNew";try{(await y.put(p,m,{headers:{token:a.token}})).status===200?this.$router.push({name:"login",params:{toastType:"success",toastMessage:this.$t("Password Reset! You may now login."),toastPosition:"top-right",toastCSS:"Toastify__toast--create"}}):n.error(this.$t("An error occurred. Please try again."),{position:"top-right",toastClassName:"Toastify__toast--delete"})}catch{n.error(this.$t("An error occurred. Please try again."),{position:"top-right",toastClassName:"Toastify__toast--delete"})}finally{this.loading=!1}}},goBackToLogin(){this.$router.push({name:"login"})}}},C={class:"font-bold text-2xl text-red-800 tracking-widest"},E={class:"d-flex justify-center align-center"};function F(s,a,m,p,r,w){return _(),$(b,null,{default:t(()=>[e(d,null,{default:t(()=>[e(i,{cols:"12",class:"pb-0"},{default:t(()=>[h("h2",C,o(s.$t("Update Password")),1)]),_:1})]),_:1}),e(d,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[u(o(s.$t("Please enter your new password:")),1)]),_:1})]),_:1}),e(d,{justify:"center"},{default:t(()=>[e(i,{cols:"12",md:"10"},{default:t(()=>[e(S,null,{default:t(()=>[e(V,{ref:"passForm",onSubmit:k(w.passFormSubmit,["prevent"])},{default:t(()=>[e(f,{modelValue:r.newPassword,"onUpdate:modelValue":a[0]||(a[0]=l=>r.newPassword=l),type:"password",rules:r.newPassRules,label:s.$t("New Password:"),class:"mx-auto",style:{width:"100%"},"prepend-icon":"mdi-lock"},null,8,["modelValue","rules","label"]),e(f,{modelValue:r.reEnterPassword,"onUpdate:modelValue":a[1]||(a[1]=l=>r.reEnterPassword=l),type:"password",rules:r.reEnterPassRules,label:s.$t("Re-enter Password:"),class:"mx-auto",style:{width:"100%"},"prepend-icon":"mdi-lock"},null,8,["modelValue","rules","label"]),h("div",E,[e(g,{onClick:w.goBackToLogin,class:"mt-3 mr-2"},{default:t(()=>[u(o(s.$t("Back to Login")),1)]),_:1},8,["onClick"]),e(g,{loading:r.loading,type:"submit",class:"mt-3 bg-red-700 text-white rounded"},{default:t(()=>[u(o(s.$t("Submit")),1)]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}const x=P(T,[["render",F]]);export{x as default};
