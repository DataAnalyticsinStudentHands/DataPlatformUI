import{_ as g,u as y,a as _,i as m,o as $,I as b,w as s,k,b as t,s as n,g as i,t as r,r as u,l,S as C,e as I,d as w,v as S,h}from"./index.b63c9539.js";const V={data(){return{userID:null,loading:!1,code:null,rules:[e=>e?!0:this.$t("Code is required")]}},mounted(){this.$route.params&&this.$route.params.userID&&(this.userID=this.$route.params.userID)},methods:{async passFormSubmit(){await this.$refs.passForm.validate();const e=this.$refs.passForm.errors.length>0,a=y();if(!e){this.loading=!0;let d={userID:this.userID,confirmationCode:this.code},c="https://node13835-1529618full3.us.reclaim.cloud/backend/userdata/resetPassWithCode";try{const o=await _.post(c,d);o.status===200?(a.setTokenHeader(o.data.token),this.$router.push({name:"passResetNewEntry",params:{userID:this.userID,toastType:"success",toastMessage:this.$t("Success! You may now reset your password."),toastPosition:"top-right",toastCSS:"Toastify__toast--create"}})):m.error(this.$t("Invalid code. Please try again."),{position:"top-right",toastClassName:"Toastify__toast--delete"})}catch{m.error(this.$t("Invalid code. Please try again."),{position:"top-right",toastClassName:"Toastify__toast--delete"})}finally{this.loading=!1}}},goBackToLogin(){this.$router.push({name:"login"})}}},D={class:"font-bold text-2xl text-red-800 tracking-widest"},T=i("br",null,null,-1),v={class:"d-flex justify-center align-center"};function F(e,a,d,c,o,p){return $(),b(k,null,{default:s(()=>[t(u,null,{default:s(()=>[t(n,{cols:"12",class:"pb-0"},{default:s(()=>[i("h2",D,r(e.$t("Password Reset Code")),1)]),_:1})]),_:1}),t(u,null,{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[l(r(e.$t("Please check your email and input the password reset code."))+" ",1),T,l(" "+r(e.$t("If you do not see an email, please check your Spam folder, or "))+" ",1),i("span",{class:"font-semibold text-red-800 cursor-pointer",onClick:a[0]||(a[0]=f=>e.$router.push("/register"))},r(e.$t("Register for an Account.")),1)]),_:1})]),_:1}),t(u,{justify:"center"},{default:s(()=>[t(n,{cols:"12",md:"8"},{default:s(()=>[t(C,null,{default:s(()=>[t(I,{ref:"passForm",onSubmit:w(p.passFormSubmit,["prevent"])},{default:s(()=>[t(S,{modelValue:o.code,"onUpdate:modelValue":a[1]||(a[1]=f=>o.code=f),rules:o.rules,label:e.$t("Code:"),class:"mx-auto",style:{width:"100%"}},null,8,["modelValue","rules","label"]),i("div",v,[t(h,{onClick:p.goBackToLogin,class:"mt-3 mr-2"},{default:s(()=>[l(r(e.$t("Back to Login")),1)]),_:1},8,["onClick"]),t(h,{loading:o.loading,type:"submit",class:"mt-3 bg-red-700 text-white rounded"},{default:s(()=>[l(r(e.$t("Submit")),1)]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}const B=g(V,[["render",F]]);export{B as default};
