import{u as p,r as h,m as w}from"./index.esm.b1d8e672.js";import{_ as f,a as m,o as d,c as a,l as s,d as y,m as n,K as c,F as P,r as v,n as _,t as l}from"./index.06e63598.js";const k={name:"VerifyAccount",created(){localStorage.getItem("token")===null&&this.$router.push("/login")},setup(){return{v$:p({$autoDirty:!0})}},mounted(){let i="https://cis-4339.herokuapp.com/eventdata/";this.queryData=[],m.get(i,{headers:{token:localStorage.getItem("token")}}).then(e=>{this.queryData=e.data},e=>{e&&this.$router.push("/login")}),window.scrollTo(0,0)},data(){return{isConfirmPasswordValid:!1,code:"",newPassword:"",confirmNewPassword:"",error:"",success:"",loginLink:"",toggle:"hide"}},methods:{chechConfirmPassword(){this.isConfirmPasswordValid=!0,this.newPassword!==this.confirmNewPassword&&(this.error="Passwords do not match.",this.isConfirmPasswordValid=!1)},async activateAccount(){const i=await this.v$.$validate();if(this.chechConfirmPassword(),i&&this.isConfirmPasswordValid){let e={code:this.code,newPassword:this.newPassword,error:this.error},g="https://cis-4339.herokuapp.com/userdata/updatePasswordForm";m.put(g,e,{headers:{token:localStorage.getItem("token")}}).then(t=>{if(t.status==200){var o=document.getElementById("myDIV");o.classList.remove("hide"),this.success=t.data.error,this.loginLink=" Login",this.error=""}},t=>{this.error=t.response.data.error,this.success=""})}}},validations(){return{newPassword:{required:h,minLengthValue:w(8)}}}},b={class:""},x={class:"px-10 py-20"},V={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},C={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},L=s("label",{for:"email",class:"block"},"Current Password",-1),T={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},N=s("label",{for:"email",class:"block"},"New Password",-1),D={key:0,class:"text-black"},I={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},S=s("label",{for:"email",class:"block"},"Confirm New Password",-1),U={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},A={class:"errorMessage bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4",role:"alert"},B={id:"myDIV",class:"hide grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},F={class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4",role:"alert"};function $(i,e,g,t,o,u){return d(),a("section",b,[s("div",x,[s("div",V,[s("form",{onSubmit:e[4]||(e[4]=y(()=>{},["prevent"])),class:"space-y-4 md:space-y-6",action:"/login",method:"POST"},[s("div",C,[s("div",null,[L,n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.code=r),type:"password",name:"secretToken",id:"secretToken",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"},null,512),[[c,o.code]])])]),s("div",T,[s("div",null,[N,n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.newPassword=r),type:"password",name:"secretToken",id:"secretToken",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"},null,512),[[c,o.newPassword]]),t.v$.newPassword.$error?(d(),a("span",D,[(d(!0),a(P,null,v(t.v$.newPassword.$errors,r=>(d(),a("p",{class:"text-red-700",key:r.$uid},l(r.$message)+"! ",1))),128))])):_("",!0)])]),s("div",I,[s("div",null,[S,n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.confirmNewPassword=r),type:"Password",name:"secretToken",id:"secretToken",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"},null,512),[[c,o.confirmNewPassword]])])]),s("div",U,[s("div",A,l(o.error),1)]),s("div",B,[s("div",F,l(o.success),1)]),s("button",{onClick:e[3]||(e[3]=(...r)=>u.activateAccount&&u.activateAccount(...r)),type:"submit",class:"bg-red-700 text-white rounded"}," Reset Password ")],32)])])])}const R=f(k,[["render",$]]);export{R as default};
