import{_ as V,u as _,a as f,o as d,c as m,b as s,w as o,d as g,e as b,V as y,r as x,s as c,v as p,al as k,g as r,F as N,x as C,z as M,af as v,t as h,B as w,h as S,l as D}from"./index.19bf4f6c.js";const T={data(){return{semester:{semesterName:"",semesterStartDate:"",semesterEndDate:""},experiences:[],selectedExperiences:[],errorMessage:""}},beforeMount(){window.scrollTo(0,0),this.fetchExperienceData()},methods:{fetchExperienceData(){let e=_().token,n=`${{BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API}/instructorSideData/experiences/`;f.get(n,{headers:{token:e}}).then(l=>{const t=l.data;this.experiences=t.filter(i=>i.experienceStatus===!0)}).catch(l=>{this.handleError(l)})},handleSubmitForm(){if(!this.semester.semesterName||!this.semester.semesterStartDate||!this.semester.semesterEndDate){this.errorMessage="Please fill in all fields.";return}let e=_().token,n=`${{BASE_URL:"/platform/",MODE:"production",DEV:!1,PROD:!0}.VITE_ROOT_API}/instructorSideData/semesters/`;f.post(n,{semesterName:this.semester.semesterName,semesterStartDate:this.semester.semesterStartDate,semesterEndDate:this.semester.semesterEndDate,experiences:this.selectedExperiences},{headers:{token:e}}).then(()=>{this.$router.push({name:"instructorSemesters",params:{toastType:"success",toastMessage:"Semester added!",toastPosition:"top-right",toastCSS:"Toastify__toast--create"}})}).catch(l=>{l.response&&l.response.data&&l.response.data.error?this.errorMessage=l.response.data.error:this.handleError(l)})}}},R=r("p",{class:"font-weight-black text-h6"},"New Semester",-1),U=r("br",null,null,-1),O=r("thead",null,[r("tr",null,[r("th",{class:"text-left"}),r("th",{class:"text-left"},"Experience Category"),r("th",{class:"text-left"},"Experience Name")])],-1),B={class:"text-left"},F=["value"],A={class:"text-left"},L={class:"text-left"},P={key:0,class:"error-message"};function I(u,e,n,l,t,i){return d(),m("main",null,[s(b,{onSubmit:g(i.handleSubmitForm,["prevent"])},{default:o(()=>[s(y,null,{default:o(()=>[R,U,s(x,null,{default:o(()=>[s(c,{cols:"12",md:"6"},{default:o(()=>[s(p,{modelValue:t.semester.semesterName,"onUpdate:modelValue":e[0]||(e[0]=a=>t.semester.semesterName=a),label:"Semester Name"},null,8,["modelValue"])]),_:1})]),_:1}),s(x,null,{default:o(()=>[s(c,{cols:"12",md:"6"},{default:o(()=>[s(p,{type:"date",modelValue:t.semester.semesterStartDate,"onUpdate:modelValue":e[1]||(e[1]=a=>t.semester.semesterStartDate=a),label:"Semester Start Date"},null,8,["modelValue"])]),_:1}),s(c,{cols:"12",md:"6"},{default:o(()=>[s(p,{type:"date",modelValue:t.semester.semesterEndDate,"onUpdate:modelValue":e[2]||(e[2]=a=>t.semester.semesterEndDate=a),label:"Semester End Date"},null,8,["modelValue"])]),_:1})]),_:1}),s(k,{style:{width:"80%"}},{default:o(()=>[O,r("tbody",null,[(d(!0),m(N,null,C(t.experiences,a=>(d(),m("tr",{key:a._id},[r("td",B,[M(r("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=E=>t.selectedExperiences=E),value:a._id,style:{outline:"2px solid #808080","margin-right":"10px"}},null,8,F),[[v,t.selectedExperiences]])]),r("td",A,h(a.experienceCategory),1),r("td",L,h(a.experienceName),1)]))),128))])]),_:1}),t.errorMessage?(d(),m("div",P,h(t.errorMessage),1)):w("",!0),s(S,{style:{"text-align":"center"},onClick:i.handleSubmitForm},{default:o(()=>[D("Submit")]),_:1},8,["onClick"]),s(S,{onClick:e[4]||(e[4]=a=>u.$router.back()),style:{"margin-left":"10px"}},{default:o(()=>[D(" Cancel ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])])}const j=V(T,[["render",I]]);export{j as default};
