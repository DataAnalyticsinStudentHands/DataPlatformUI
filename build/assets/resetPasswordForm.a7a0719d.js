import{u as w,r as h,m as p}from"./index.esm.b1d8e672.js";import{_ as f,a as v,o as n,c as a,l as s,d as y,m as c,K as l,F as _,r as P,n as k,k as g,t as d}from"./index.06e63598.js";const b={name:"VerifyAccount",setup(){return{v$:w({$autoDirty:!0})}},data(){return{isConfirmPasswordValid:!1,code:"",newPassword:"",confirmNewPassword:"",error:"",success:"",loginLink:"",sendNewCodeLink:"",toggle:"hide"}},methods:{chechConfirmPassword(){this.isConfirmPasswordValid=!0,this.newPassword!==this.confirmNewPassword&&(this.error="Passwords do not match.",this.isConfirmPasswordValid=!1)},async activateAccount(){const m=await this.v$.$validate();if(this.chechConfirmPassword(),m&&this.isConfirmPasswordValid){let o={code:this.code,newPassword:this.newPassword,error:this.error},u="https://cis-4339.herokuapp.com/userdata/resetPasswordForm";v.put(u,o).then(i=>{if(i.status==200){var e=document.getElementById("successDIV");e.classList.remove("hide");var t=document.getElementById("errorDIV");t.classList.add("hide"),this.success=i.data.error,this.loginLink=" Login",this.error="",this.sendNewCodeLink=""}},i=>{var e=document.getElementById("errorDIV");e.classList.remove("hide"),this.error=i.response.data.error,this.success="",this.sendNewCodeLink=" Send new Code?"})}}},validations(){return{newPassword:{required:h,minLengthValue:p(8)}}}},x={class:""},V={class:"px-10 py-20"},C={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},L={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},N=s("label",{for:"email",class:"block"},"Code",-1),T={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},D=s("label",{for:"email",class:"block"},"New Password",-1),I={key:0,class:"text-black"},B={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},F=s("label",{for:"email",class:"block"},"Confirm New Password",-1),A={id:"errorDIV",class:"hide grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},E={class:"errorMessage bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4",role:"alert"},S={class:"font-medium text-primary-600 hover:underline dark:text-blue-500",href:"./resetPassword"},U={id:"successDIV",class:"hide grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},M={class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4",role:"alert"},R={class:"font-medium text-primary-600 hover:underline dark:text-blue-500",href:"./login"};function q(m,o,u,i,e,t){return n(),a("section",x,[s("div",V,[s("div",C,[s("form",{onSubmit:o[4]||(o[4]=y(()=>{},["prevent"])),class:"space-y-4 md:space-y-6",action:"/login",method:"POST"},[s("div",L,[s("div",null,[N,c(s("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>e.code=r),type:"text",name:"secretToken",id:"secretToken",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"Code"},null,512),[[l,e.code]])])]),s("div",T,[s("div",null,[D,c(s("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>e.newPassword=r),type:"password",name:"secretToken",id:"secretToken",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"},null,512),[[l,e.newPassword]]),i.v$.newPassword.$error?(n(),a("span",I,[(n(!0),a(_,null,P(i.v$.newPassword.$errors,r=>(n(),a("p",{class:"text-red-700",key:r.$uid},d(r.$message)+"! ",1))),128))])):k("",!0)])]),s("div",B,[s("div",null,[F,c(s("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>e.confirmNewPassword=r),type:"Password",name:"secretToken",id:"secretToken",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"},null,512),[[l,e.confirmNewPassword]])])]),s("div",A,[s("div",E,[g(d(e.error),1),s("a",S,d(e.sendNewCodeLink),1)])]),s("div",U,[s("div",M,[g(d(e.success),1),s("a",R,d(e.loginLink),1)])]),s("button",{onClick:o[3]||(o[3]=(...r)=>t.activateAccount&&t.activateAccount(...r)),type:"submit",class:"bg-red-700 text-white rounded"}," Reset Password ")],32)])])])}const j=f(b,[["render",q]]);export{j as default};
