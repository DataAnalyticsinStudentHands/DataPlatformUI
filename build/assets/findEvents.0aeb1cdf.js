import{D as _}from"./datetime.a1e71b77.js";import{_ as f,u as c,a as h,o as l,c as i,l as e,m as u,v as y,K as v,L as g,n as p,F as x,r as b,t as m}from"./index.06e63598.js";const D={data(){return{queryData:[],searchBy:"",eventName:"",eventDate:""}},mounted(){let t=c().token,r="https://cis-4339.herokuapp.com/eventdata/";this.queryData=[],h.get(r,{headers:{token:t}}).then(n=>{this.queryData=n.data},n=>{n&&this.$router.push("/login")}),window.scrollTo(0,0)},methods:{formattedDate(d){return _.fromISO(d).plus({days:1}).toLocaleString()},handleSubmitForm(){let t=c().token,r="";this.searchBy==="Event Name"?r=`https://cis-4339.herokuapp.com/eventdata/search/?eventName=${this.eventName}&searchBy=name`:this.searchBy==="Event Date"&&(r=`https://cis-4339.herokuapp.com/eventdata/search/?eventDate=${this.eventDate}&searchBy=date`),h.get(r,{headers:{token:t}}).then(n=>{this.queryData=n.data})},clearSearch(){let t=c().token;this.searchBy="",this.eventName="",this.eventDate="";let r="https://cis-4339.herokuapp.com/eventdata/";this.queryData=[],h.get(r,{headers:{token:t}}).then(n=>{this.queryData=n.data})},editEvent(d){this.$router.push({name:"eventdetails",params:{id:d}})}}},k=e("div",null,[e("h1",{class:"font-bold text-4xl text-red-700 tracking-widest text-center mt-10"}," List of Events ")],-1),E={class:"px-10 pt-20"},S={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},w=e("h2",{class:"text-2xl font-bold"},"Search Event By",-1),B={class:"flex flex-col"},N=e("option",{value:"Event Name"},"Event Name",-1),F=e("option",{value:"Event Date"},"Event Date",-1),L=[N,F],q={key:0,class:"flex flex-col"},C={class:"block"},U={key:1,class:"flex flex-col"},V={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},K=e("div",null,null,-1),R=e("div",null,null,-1),T={class:"mt-5 grid-cols-2"},I=e("hr",{class:"mt-10 mb-10"},null,-1),M={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},A=e("div",{class:"ml-10"},[e("h2",{class:"text-2xl font-bold"},"List of Events"),e("h3",{class:"italic"},"Click table row to edit/display an entry")],-1),O={class:"flex flex-col col-span-2"},j={class:"min-w-full shadow-md rounded"},z=e("thead",{class:"bg-gray-50 text-xl"},[e("tr",null,[e("th",{class:"p-4 text-left"},"Event Name"),e("th",{class:"p-4 text-left"},"Event Date"),e("th",{class:"p-4 text-left"},"Event Address")])],-1),G={class:"divide-y divide-gray-300"},H=["onClick"],J={class:"p-2 text-left"},P={class:"p-2 text-left"},Q={class:"p-2 text-left"};function W(d,t,r,n,a,o){return l(),i("main",null,[k,e("div",E,[e("div",S,[w,e("div",B,[u(e("select",{class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[0]||(t[0]=s=>a.searchBy=s)},L,512),[[y,a.searchBy]])]),a.searchBy==="Event Name"?(l(),i("div",q,[e("label",C,[u(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":t[1]||(t[1]=s=>a.eventName=s),onKeyup:t[2]||(t[2]=g((...s)=>o.handleSubmitForm&&o.handleSubmitForm(...s),["enter"])),placeholder:"Enter event name"},null,544),[[v,a.eventName]])])])):p("",!0),a.searchBy==="Event Date"?(l(),i("div",U,[u(e("input",{class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>a.eventDate=s),onKeyup:t[4]||(t[4]=g((...s)=>o.handleSubmitForm&&o.handleSubmitForm(...s),["enter"]))},null,544),[[v,a.eventDate]])])):p("",!0)]),e("div",V,[K,R,e("div",T,[e("button",{class:"mr-10 border border-red-700 bg-white text-red-700 rounded",onClick:t[5]||(t[5]=(...s)=>o.clearSearch&&o.clearSearch(...s)),type:"submit"}," Clear Search "),e("button",{class:"bg-red-700 text-white rounded",onClick:t[6]||(t[6]=(...s)=>o.handleSubmitForm&&o.handleSubmitForm(...s)),type:"submit"}," Search Event ")])])]),I,e("div",M,[A,e("div",O,[e("table",j,[z,e("tbody",G,[(l(!0),i(x,null,b(a.queryData,s=>(l(),i("tr",{onClick:X=>o.editEvent(s._id),key:s._id},[e("td",J,m(s.eventName),1),e("td",P,m(o.formattedDate(s.date)),1),e("td",Q,m(s.address.line1),1)],8,H))),128))])])])])])}const $=f(D,[["render",W]]);export{$ as default};
