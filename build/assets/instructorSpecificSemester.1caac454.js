import{_ as V,u,a as i,o as c,c as h,b as r,w as o,V as k,g as s,t as p,r as x,s as f,v as S,al as N,F as y,x as b,z as C,af as U,h as D,l as _}from"./index.b63c9539.js";import{D as g}from"./datetime.a1e71b77.js";const w={props:["id"],data(){return{semester:{originalSemesterName:"",semesterName:"",semesterStartDate:"",semesterEndDate:"",semesterStatus:!1,experiences:[]},selectedExperiences:[]}},beforeMount(){window.scrollTo(0,0),this.fetchExperienceData(),this.fetchSemesterData()},methods:{fetchSemesterData(){let t=u().token,n="https://node13835-1529618full3.us.reclaim.cloud/backend/instructorSideData/semesters";i.get(`${n}/${this.$route.params.id}`,{headers:{token:t}}).then(a=>{let e=a.data;this.semester.originalSemesterName=e.semesterName,this.semester.semesterName=e.semesterName,this.semester.semesterStartDate=g.fromISO(e.semesterStartDate).plus({days:1}).toISODate(),this.semester.semesterEndDate=g.fromISO(e.semesterEndDate).plus({days:1}).toISODate(),this.semester.semesterStatus=e.semesterStatus,this.selectedExperiences=e.experiences}).catch(a=>{this.handleError(a)})},fetchExperienceData(){let t=u().token,n="https://node13835-1529618full3.us.reclaim.cloud/backend/instructorSideData/experiences/";i.get(n,{headers:{token:t}}).then(a=>{this.semester.experiences=a.data.filter(e=>e.experienceStatus===!0)}).catch(a=>{this.handleError(a)})},handleUpdateForm(){let t=u().token;const n={semesterName:this.semester.semesterName,semesterStartDate:this.semester.semesterStartDate,semesterEndDate:this.semester.semesterEndDate,experiences:this.selectedExperiences};let a="https://node13835-1529618full3.us.reclaim.cloud/backend/instructorSideData/semesters";i.get(`${a}/${this.$route.params.id}`,{headers:{token:t}}).then(e=>{let d=e.data;this.semester.semesterStatus=d.semesterStatus,i.put(`${a}/${this.$route.params.id}`,n,{headers:{token:t}}).then(()=>{this.$router.push({name:"instructorSemesters",params:{toastType:"info",toastMessage:"Semester updated!",toastPosition:"top-right",toastCSS:"Toastify__toast--update"}})})})}}},$={class:""},v={class:"font-weight-black text-h6"},T=s("br",null,null,-1),F=s("thead",null,[s("tr",null,[s("th",{class:"text-left"}),s("th",{class:"text-left"},"Experience Code"),s("th",{class:"text-left"},"Experience Name")])],-1),I={class:"text-left"},B=["value"],O={class:"text-left"},L={class:"text-left"},M={style:{"text-align":"right"}};function R(m,t,n,a,e,d){return c(),h("main",$,[r(k,null,{default:o(()=>[s("p",v,"Semester: "+p(e.semester.originalSemesterName),1),T,r(x,null,{default:o(()=>[r(f,{cols:"12",md:"6"},{default:o(()=>[r(S,{modelValue:e.semester.semesterName,"onUpdate:modelValue":t[0]||(t[0]=l=>e.semester.semesterName=l),label:"Semester Name"},null,8,["modelValue"])]),_:1})]),_:1}),r(x,null,{default:o(()=>[r(f,{cols:"12",md:"6"},{default:o(()=>[r(S,{type:"date",modelValue:e.semester.semesterStartDate,"onUpdate:modelValue":t[1]||(t[1]=l=>e.semester.semesterStartDate=l),label:"Semester Start Date"},null,8,["modelValue"])]),_:1}),r(f,{cols:"12",md:"6"},{default:o(()=>[r(S,{type:"date",modelValue:e.semester.semesterEndDate,"onUpdate:modelValue":t[2]||(t[2]=l=>e.semester.semesterEndDate=l),label:"Semester End Date"},null,8,["modelValue"])]),_:1})]),_:1}),r(N,{style:{width:"80%"}},{default:o(()=>[F,s("tbody",null,[(c(!0),h(y,null,b(e.semester.experiences,l=>(c(),h("tr",{key:l._id},[s("td",I,[C(s("input",{type:"checkbox",value:l._id,"onUpdate:modelValue":t[3]||(t[3]=E=>e.selectedExperiences=E),style:{outline:"2px solid #808080","margin-right":"10px"}},null,8,B),[[U,e.selectedExperiences]])]),s("td",O,p(l.experienceCategory),1),s("td",L,p(l.experienceName),1)]))),128))])]),_:1}),s("div",M,[r(D,{onClick:t[4]||(t[4]=l=>m.$router.back()),style:{"margin-right":"10px"}},{default:o(()=>[_(" Cancel ")]),_:1}),r(D,{style:{"text-align":"center"},onClick:d.handleUpdateForm},{default:o(()=>[_(" Update ")]),_:1},8,["onClick"])])]),_:1})])}const j=V(w,[["render",R]]);export{j as default};
